# ğŸ“ ì›¹ í´ë¦½ë³´ë“œ
> ë©”ëª¨ë¥¼ ì‰½ê²Œ ë³µì‚¬ ë° ì €ì¥ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì›¹ í´ë¦½ë³´ë“œì…ë‹ˆë‹¤.

í™ˆí™”ë©´ | ë¡œê·¸ì¸ í™”ë©´ | ë©”ëª¨ ì¶”ê°€
--|--|--
![í™ˆí™”ë©´](./img/clipboard-1.png) | ![ë©”ëª¨ì‘ì„±](./img/clipboard-2.png) | ![ë¡œê·¸ì¸](./img/clipboard-3.png)


<br>

## ğŸ”— Links

- [ğŸŒ ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°](https://tony96kimsh.github.io/WebClipboard/)  
- [ğŸ“˜ ì‘ì—… ë¡œê·¸ (Notion)](https://stump-smartphone-024.notion.site/React-Oauth-Cloud-DB-1e7f398452c380489bf0dbc33195c385?pvs=4)

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

### ì œì‘ ë°°ê²½

QA ì—…ë¬´ ì¤‘ ì´ìŠˆ ë³´ê³ ì„œë¥¼ ë³µì‚¬í•´ ì‚¬ìš©í•˜ëŠ” ì¼ì´ ì¦ì•˜ê³ , ì´ë¥¼ ìœ„í•´ ë…¸ì…˜ì´ë‚˜ ë©”ëª¨ì•±ì„ í™œìš©í•˜ê³¤ í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ë¥¸ ë©”ëª¨ë“¤ê³¼ ì„ì—¬ ìˆì–´ ì›í•˜ëŠ” ë©”ëª¨ë¥¼ ì°¾ëŠ” ë° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë ¸ê³ , ìœˆë„ìš° í´ë¦½ë³´ë“œ ê¸°ëŠ¥ë„ í•œê³„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ ë³µì‚¬ì™€ ë©”ëª¨ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë¶„ë¦¬í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ”, **ëª…í™•í•œ ëª©ì ì˜ ì›¹ í´ë¦½ë³´ë“œ** ì•±ì„ ì œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

### ê¸°ìˆ  ìŠ¤íƒ

- TypeScript
- React
- Google OAuth
- Supabase (Cloud DB, ê°œë°œ ì¤‘)

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

1. ë©”ëª¨ í´ë¦­ ì‹œ ìë™ ë³µì‚¬
2. í´ë”ë¡œ ë©”ëª¨ ë¶„ë¥˜ ê°€ëŠ¥
3. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥
4. Google OAuth ë¡œê·¸ì¸
5. (ì§„í–‰ ì¤‘) ë¡œê·¸ì¸ ì‹œ Supabaseì™€ ë™ê¸°í™”

---

## ğŸ—‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

### ë ˆì´ì•„ì›ƒ êµ¬ì„±

- **í—¤ë”**: ì•± ì´ë¦„, ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
- **ë©”ì¸**:
  - í´ë” ì„ íƒ ë©”ë‰´
  - ë©”ëª¨ ì¶”ê°€ ì…ë ¥ë€
  - ë©”ëª¨ ë¦¬ìŠ¤íŠ¸
- **í’‹í„°**: ê¹ƒí—ˆë¸Œ, ì´ë©”ì¼, ì €ì‘ê¶Œ ì •ë³´

---

### ğŸ“ í´ë” êµ¬ì¡°
```
/src
â”œâ”€â”€ App.css                # ì „ì²´ ì•± ìŠ¤íƒ€ì¼ ì •ì˜
â”œâ”€â”€ App.tsx                # ì•±ì˜ ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸, ì „ë°˜ì ì¸ ìƒíƒœ ê´€ë¦¬ ë° ë Œë”ë§ ì²˜ë¦¬
â”œâ”€â”€ assets
â”‚   â””â”€â”€ react.svg          # ë¦¬ì•¡íŠ¸ ë¡œê³  (ê¸°ë³¸ ì´ë¯¸ì§€, ì‚¬ìš© ì—¬ë¶€ì— ë”°ë¼ ë‹¬ë¼ì§)
â”œâ”€â”€ components             # ì£¼ìš” UI ì»´í¬ë„ŒíŠ¸ ëª¨ìŒ
â”‚   â”œâ”€â”€ FolderMenu.css     # í´ë” ì„ íƒ UIì˜ ì „ìš© ìŠ¤íƒ€ì¼
â”‚   â”œâ”€â”€ FolderMenu.tsx     # í´ë” ë¦¬ìŠ¤íŠ¸ ë° ì„ íƒ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ InsertMemo.tsx     # ìƒˆë¡œìš´ ë©”ëª¨ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ì…ë ¥ì°½ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ MemoList.css       # ë©”ëª¨ ë¦¬ìŠ¤íŠ¸ UIì˜ ì „ìš© ìŠ¤íƒ€ì¼
â”‚   â”œâ”€â”€ MemoList.tsx       # í˜„ì¬ ì„ íƒëœ í´ë”ì˜ ë©”ëª¨ ë¦¬ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ MemoModal.tsx      # ë©”ëª¨ ìˆ˜ì • ì‹œ ì‚¬ìš©í•˜ëŠ” ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ data                   # íƒ€ì… ì •ì˜ ë° ìƒ˜í”Œ ë°ì´í„°
â”‚   â”œâ”€â”€ Folder.ts          # í´ë” ê°ì²´ íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ Memo.ts            # ë©”ëª¨ ê°ì²´ íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ Sample.ts          # ì´ˆê¸° ë Œë”ë§ì„ ìœ„í•œ ìƒ˜í”Œ ë°ì´í„°ë“¤
```
### ğŸªœ ì½”ë“œ êµ¬ì¡°

#### ë¡œê·¸ì¸ ìœ ë¬´ì— ë”°ë¥¸ ë°ì´í„° ì½ê¸°ì™€ ì €ì¥ ë™ì‘

ë¡œê·¸ì¸ ì •ë³´ê°€ ìˆìœ¼ë©´ í´ë¼ìš°ë“œ DBì— ì €ì¥í•˜ê³  ì—†ì„ ê²½ìš° ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```mermaid
flowchart TD
  A[Component Mount or Add Memo] --> B{Is Logged In?}
  B -->|Yes| C{Has Email?}
  C -->|Yes| D{Action Type}
  D -->|Initial Load| E[Fetch folders from Supabase by email]
  E --> F{Data exists?}
  F -->|Yes| G[Set folders from Supabase]
  F -->|No| H[Set folders as sample data]

  D -->|Add Memo| I[Insert new memo to Supabase with email]

  C -->|No| J[Fallback to localStorage]
  B -->|No| J

  J --> K{Action Type}
  K -->|Initial Load| L[Load folders from localStorage or use sample data]
  K -->|Add Memo| M[Save memo to localStorage]
```

#### ë©”ëª¨ CRUD ì½”ë“œ

``` tsx
// ë©”ëª¨ ì¶”ê°€
const addMemo = (title: string, content: string) => {
  const newMemo: Memo = {
    id: crypto.randomUUID(),
    folderId: selectedFolderId,
    title,
    content,
    createdAt: new Date(),
    updatedAt: new Date(),
  };

  setMemos([newMemo, ...memos]);

  if (isLogin) {
    supabase.from("memos").insert([{ ...newMemo, email: userInfo?.email }]);
  } else {
    localStorage.setItem("memos", JSON.stringify([newMemo, ...memos]));
  }
};

// ë©”ëª¨ ìˆ˜ì •
const editMemo = (editedMemo: Memo) => {
  setMemos((prev) =>
    prev.map((memo) => (memo.id === editedMemo.id ? editedMemo : memo))
  );

  if (isLogin) {
    supabase
      .from("memos")
      .update({ ...editedMemo })
      .eq("id", editedMemo.id);
  } else {
    localStorage.setItem(
      "memos",
      JSON.stringify(
        memos.map((memo) => (memo.id === editedMemo.id ? editedMemo : memo))
      )
    );
  }
};

// ë©”ëª¨ ì‚­ì œ
const deleteMemo = (id: string) => {
  setMemos((prev) => prev.filter((memo) => memo.id !== id));

  if (isLogin) {
    supabase.from("memos").delete().eq("id", id);
  } else {
    localStorage.setItem(
      "memos",
      JSON.stringify(memos.filter((memo) => memo.id !== id))
    );
  }
};
```

#### êµ¬ê¸€ Oauth ì—°ê²° ì½”ë“œ

``` tsx
<GoogleLogin
  onSuccess={(credentialResponse) => {
    const token = credentialResponse.credential;
    const decoded: any = jwtDecode(token!);

    setUserInfo({
      email: decoded.email,
      name: decoded.name,
      picture: decoded.picture,
    });
    setIsLogin(true);
  }}
  onError={() => {
    setUserInfo(null);
    setIsLogin(false);
    alert("âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨");
  }}
/>
```

### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° (Supabase)

#### ğŸ“ folders í…Œì´ë¸”
| Column       | Type       | ì„¤ëª…                          |
|--------------|------------|------------------------------|
| `id`         | UUID (PK)  | í´ë”ì˜ ê³ ìœ  ID                  |
| `name`       | text       | í´ë” ì´ë¦„                      |
| `created_at` | timestampz | í´ë” ìƒì„± ì‹œê°                  |
| `user_email` | text       | ì‚¬ìš©ì ì´ë©”ì¼ (êµ¬ë¶„ìš©)            |

#### ğŸ“ memos í…Œì´ë¸”
| Column        | Type       | ì„¤ëª…                           |
|---------------|------------|-------------------------------|
| `id`          | UUID (PK)  | ë©”ëª¨ì˜ ê³ ìœ  ID                   |
| `folderId`    | UUID (FK)  | ì—°ê²°ëœ í´ë”ì˜ ID                 |
| `title`       | text       | ë©”ëª¨ ì œëª©                       |
| `content`     | text       | ë©”ëª¨ ë‚´ìš©                       |
| `created_at`  | timestampz | ë©”ëª¨ ìƒì„± ì‹œê°                   |
| `updated_at`  | timestampz | ë©”ëª¨ ìˆ˜ì • ì‹œê°                   |
| `user_email`  | text       | ì‚¬ìš©ì ì´ë©”ì¼ (êµ¬ë¶„ìš©)             |

#### ğŸ”— Table Relationship

```mermaid
erDiagram
  folders ||--o{ memos : contains
  folders {
    UUID id PK
    text name
    timestampz created_at
    text user_email
  }
  memos {
    UUID id PK
    UUID folderId FK
    text title
    text content
    timestampz created_at
    timestampz updated_at
    text user_email
  }
```